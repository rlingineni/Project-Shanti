
var HID = require('node-hid');
var devices = HID.devices();
console.log(devices);
var device = new HID.HID(5430,257);

device.sendFeatureReport([0x01, 0x42, 0xEE, 0x40, 0x40, 0x02, 0x02, 0x00, 0x73, 0x3A, 0x80, 0x01, 0x04, 0xA2, 0x1A, 0x80, 0x01, 0x24, 0x81, 0x01, 0x00, 0x82, 0x02, 0x09, 0x26, 0x83, 0x02, 0x08, 0x29, 0x85, 0x01, 0x00, 0x86, 0x01, 0x00, 0x87, 0x01, 0x00, 0x88, 0x01, 0x00, 0xA4, 0x0C, 0x80, 0x01, 0x00, 0x81, 0x01, 0x00, 0x82, 0x01, 0x00, 0x83, 0x01, 0x00, 0x86, 0x01, 0x04, 0xA7, 0x08, 0x80, 0x02, 0x09, 0x26, 0x81, 0x02, 0x08, 0x29])

device.sendFeatureReport([0x01, 0xEE, 0x0D, 0xEE, 0x0B, 0x40, 0x02, 0x02, 0x00, 0x73, 0x05, 0xA2, 0x03, 0x84, 0x01, 0xFF]);

function registerForNotifs(callback){
   device.on('data', function(buffer) {
      callback(buffer);
   });
}

/*device.on('data', function(buffer) {
   console.log(buffer);
});*/


module.exports = {registerForNotifs};


/*
var hid = require('hid')

module.exports = {subscribe} 

const device = hid.open(5430, 257);

let buf  = new Buffer([0x02, 0x42, 0xEE, 0x40, 0x40, 0x02, 0x02, 0x00, 0x73, 0x3A, 0x80, 0x01, 0x04, 0xA2, 0x1A, 0x80, 0x01, 0x24, 0x81, 0x01, 0x00, 0x82, 0x02, 0x09, 0x26, 0x83, 0x02, 0x08, 0x29, 0x85, 0x01, 0x00, 0x86, 0x01, 0x00, 0x87, 0x01, 0x00, 0x88, 0x01, 0x00, 0xA4, 0x0C, 0x80, 0x01, 0x00, 0x81, 0x01, 0x00, 0x82, 0x01, 0x00, 0x83, 0x01, 0x00, 0x86, 0x01, 0x04, 0xA7, 0x08, 0x80, 0x02, 0x09, 0x26, 0x81, 0x02, 0x08, 0x29]);



function subscribe(callback, pollDuration=200){
   setInterval(()=>{
      let bytes=  hid.read(device, buf);
      console.log(bytes);
      //console.log(buf);
      callback(buf);
   } , pollDuration);
}
*/

